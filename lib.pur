vector range(n)={vector r=[];int i=-1;while (i+=1)<n:r<-i;r}; 

vector mapref(vector L,int n)={vector s=[];int i=@L;while (i-=1)>=0:s<-(L[i][n]);s};
vector map(var f(x..),vector v..)={vector s=[];int i=-1,M=@v[0];while (i+=1)<M:s<-(apply(f,mapref(v,i)));s};

vector filter(int fn(x),vector v)={vector s=[];int i=-1,M=@v;while (i+=1)<M:if fn(v[i]):s<-v[i]:None;s};
vector partition(int fn(x),vector v)={vector s=[],t=[];int i=-1,M=@v;while (i+=1)<M:if fn(v[i]):s<-v[i]:t<-v[i];[s,t]};
vector vtabulate(int n,var f(int x))={vector s=[];int i=-1;while (i+=1)<n:s<-f(i);s};
